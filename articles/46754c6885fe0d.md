---
title: "ESLintã§ã‚¬ãƒƒãƒ„ãƒªç¸›ã£ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®æ®µéšçš„Biomeå°å…¥ã®è¨˜éŒ²ï¼ˆå‰ç¯‡ï¼‰"
emoji: "ğŸ¿ï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [typescript, eslint, biome]
published: false
publication_name: globis
---

## èª²é¡Œ

#### ğŸ˜° å¾…ã¡æ™‚é–“ãŒé•·ã„ã¨ã€é›†ä¸­ã®å¯¸æ–­ãŒç™ºç”Ÿã—ã¦åŠ¹ç‡ã‚’è½ã¨ã™

- ESLintã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã™ã‚‹ã¨1åˆ†30ç§’ãã‚‰ã„æ›ã‹ã£ã¦ã„ãŸ
- ã‚¨ãƒ‡ã‚£ã‚¿ã®ESLintæ‹¡å¼µãŒé‡ãŸããªã‚‹æ™‚ãŒã‚ã‚‹
- pre-commitãŒé•·ã„

CIã¯...æ—©ã„ã«è¶Šã—ãŸã“ã¨ã¯ç„¡ã„ãŒãƒ†ã‚¹ãƒˆç³»ãŒã‚‚ã£ã¨é•·ã„ã®ã§ä¸€æ—¦èª²é¡Œæ„Ÿã¯å°ã•ã„

## ç›®æŒ‡ã™çŠ¶æ…‹

#### ESLintã¨Biomeã®ä½µç”¨ã§è‰¯ã„ã¨ã“å–ã‚Š

- åŸºæœ¬ã®ãƒ«ãƒ¼ãƒ«ã¯Biomeã§ç¸›ã‚‹ï¼ˆ1ç§’æœªæº€ã‚’ç›®æŒ‡ã™ï¼‰
- ç‹¬è‡ªãƒ«ãƒ¼ãƒ«ã‚„Libraryæ¨å¥¨ã®ãƒ«ãƒ¼ãƒ«ã¯ESLintã§ç¸›ã‚‹ï¼ˆ5ç§’ä»¥å†…ã‚’ç›®æŒ‡ã™ï¼‰


## å®Œå…¨ç½®ãæ›ãˆã‹ã‚‰ä½µç”¨ã«è‡³ã‚‹ã¾ã§ã®æ€è€ƒéç¨‹

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ recommended ã®ãƒ«ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ã¯800ä»¶ãã‚‰ã„ã§ã¦ã„ã‚‹çŠ¶æ…‹ã§
å®Ÿè¡Œæ™‚é–“ ç´„0.3ç§’ ã§å®Ÿè¡Œã§ããŸã€‚ç¢ºã‹ã«æ—©ã„ï¼

#### èª²é¡Œ: Biomeã¯ESLintã®ãƒ«ãƒ¼ãƒ«ã‚’å®Œå…¨ã«ç½®ãæ›ãˆã‚‹ã‚‚ã®ã§ã¯ãªã„

- ç‹¬è‡ªãƒ«ãƒ¼ãƒ«ãŒä½œã‚Œãªã„
- Libraryæ¨å¥¨ã® npm package ã¨ã—ã¦å…¬é–‹ã•ã‚Œã¦ã„ã‚‹rulesãŒç„¡ã„ï¼ˆtesting-libraryã‚„vitestãªã©ï¼‰

#### å¯¾ç­–: ä½µç”¨ã§è‰¯ã„ã¨ã“å–ã‚Šã‚’ã—ã‚ˆã†

- **å®Œå…¨ç½®ãæ›ãˆã¯ç¾å®Ÿçš„ã«ã§ããªã„**
  - Biomeã§å®Ÿç¾ã§ããªã„ãƒ«ãƒ¼ãƒ«ã‚’æ¨ã¦ã‚‹ã‹ï¼Ÿ
    - ä¸€éƒ¨ã¯ã§ãã‚‹ãŒã€æœ‰ç”¨ãªãƒ«ãƒ¼ãƒ«ã¯æ¨ã¦ã‚‰ã‚Œãªã„
  - Biomeã‚’ã‚„ã‚ã‚‹ã‹ï¼Ÿ
    - æ—©ã„ã¯æ­£ç¾©ï¼
    - webpackã‹ã‚‰viteã«è¼‰ã›æ›¿ãˆãŸæ™‚ã®ã‚¢ãƒ¬ã«è¿‘ã„åŠ¹æœã‚’å¾—ã‚‰ã‚Œã‚‹ãªã‚‰ã‚„ã‚ŠãŸã„
- **ESLintã¨Biomeã‚’ä½µç”¨ã—ã‚ˆã†**
  - Biomeã«åŸºæœ¬ãƒ«ãƒ¼ãƒ«ã‚’ç§»ã›ã°ãƒˆãƒ¼ã‚¿ãƒ«ã®å®Ÿè¡Œæ™‚é–“ã¯å‰Šæ¸›å‡ºæ¥ã‚‹
    - **ESLintã®ã©ã®ãƒ«ãƒ¼ãƒ«ãŒå®Ÿè¡Œæ™‚é–“ã‚’é•·ãã—ã¦ã„ã‚‹ã®ã‹ã¯åˆ¥é€”èª¿æŸ»ãŒå¿…è¦**
  - è¤‡æ•°ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å…¥ã‚Œã¦ç®¡ç†ãŒç…©é›‘ã«ãªã‚‰ãªã„ã‹ï¼Ÿ
    - ã‚€ã—ã‚ä¸Šæ‰‹ãè¡Œã‘ã° prettier ã‚„ eslint rules library ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒå‡ºæ¥ã‚‹
  - ç‹¬è‡ªãƒ«ãƒ¼ãƒ«ã‚„Libraryæ¨å¥¨ã®ãƒ«ãƒ¼ãƒ«ã¯ESLintã§ç¸›ã‚‹ã®ã¯ç¶™ç¶šå‡ºæ¥ã‚‹


## Biomeã®å°å…¥


[Biomeå…¬å¼ Getting Started](https://biomejs.dev/guides/getting-started/)ã¨[Biomeå…¬å¼ Migrate from ESLint & Prettier](https://biomejs.dev/guides/migrate-eslint-prettier/)ã‚’å‚è€ƒã«ã—ã¦ã„ãã€‚

### 1. Biomeã¯rootã«1ã¤ã ã‘å°å…¥ã™ã‚‹ï¼ˆmonorepoã®è©±ï¼‰

æœ€åˆã«yarn workspace ã§ã€ãã‚Œãã‚Œã®workspaceã”ã¨ã«biomeã‚’å°å…¥ã—ã‚ˆã†ã¨ã—ãŸã€‚èƒŒæ™¯ã¨ã—ã¦ã¯ã€ESLintã¯workspaceã”ã¨ã« `.eslintrc.js` ã§è¨­å®šã‚’å€‹åˆ¥ã§æ›¸ã„ã¦ã„ãŸã‹ã‚‰ãã‚Œã«åˆã‚ã›ãŸå½¢ã ã£ãŸã€‚

```bash
# â­•ï¸ rootã«ã ã‘å°å…¥ã§è‰¯ã•ãã†
yarn add --dev --exact @biomejs/biome

# âŒï¸ å½“åˆã¯workspaceã”ã¨ã«å°å…¥ã—ã‚ˆã†ã¨ã—ã¦ã„ãŸ
yarn workspace packageA add --dev --exact @biomejs/biome
yarn workspace packageB add --dev --exact @biomejs/biome
yarn workspace packageC add --dev --exact @biomejs/biome
```

#### Q. workspaceã”ã¨ã«ãƒ«ãƒ¼ãƒ«ã‚’å¤‰ãˆãŸã‹ã£ãŸã‚‰ï¼Ÿ

A. workspaceã”ã¨ã« `biome.json` ã‚’ä½œæˆã™ã‚‹

- biomeã¯å®Ÿè¡Œã•ã‚ŒãŸå ´æ‰€ã‚’èµ·ç‚¹ã« `biome.json` ã‚’æ¢ã™
- å®Ÿè¡Œéšå±¤ã« `biome.json` ãŒæœ‰ã‚Œã°ãã®è¨­å®šã‚’è¦‹ã¦ãã‚Œã‚‹
- ç„¡ã‘ã‚Œã°ä¸Šã«é¡ã£ã¦rootã® `biome.json` ã‚’è¦‹ã«è¡Œã

â€» å™‚ã«ã‚ˆã‚‹ã¨ VSCode ãªã©ã®æ‹¡å¼µã§ã¯ root ã ã‘ã‚’èª­ã¿ã«è¡Œãã‚‰ã—ã„ï¼Ÿã¾ãŸ workspace æ‹¡å¼µã§é–‹ã„ãŸå ´åˆã¯ã©ã†ãªã‚‹ã®ã ã‚ã†ï¼Ÿ

[Biomeå…¬å¼ Big Projects](https://biomejs.dev/guides/big-projects/)
[Biome ã®å°å…¥ã¨è¨­å®šæ–¹æ³•ã¾ã¨ã‚ - è¨­å®šã¨æŒ¯ã‚‹èˆã„](https://zenn.dev/akineko/articles/d967d5dcada598#%E8%A8%AD%E5%AE%9A%E3%81%A8%E6%8C%AF%E3%82%8B%E8%88%9E%E3%81%84)

#### Q. ãƒ«ãƒ¼ãƒ«ã‚’ç¶™æ‰¿ã—ãŸã‘ã‚Œã°ï¼Ÿ

A. workspace ã® `biome.json` ã«rootã® `biome.json` ã‚’ `extends` ã™ã‚‹

```json:root/packages/packageA/biome.json
{
  "extends": ["../biome.json"]
}
```

### 2. migrateã‚³ãƒãƒ³ãƒ‰ã§å°å…¥

[Biomeå…¬å¼ Migrate from ESLint & Prettier](https://biomejs.dev/guides/migrate-eslint-prettier/)
ãƒ¡ã‚¤ãƒ³ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ«ãƒ¼ãƒ«ã‚’å…ƒã«migrateã™ã‚‹ãŸã‚ã«ã€ç‰¹å®šé…ä¸‹ã§ `biome migrate` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚

```bash
cd root/packages/packageA # ä»»æ„ã®.eslintrc.jsãŒã‚ã‚‹éšå±¤ã§
yarn biome migrate eslint --write
yarn biome migrate prettier --write
```

`biome.json`ãŒä½œæˆã•ã‚Œã‚‹ãŒã€åˆå‹•ã‚’æ¥½ã«ã—ã¦ãã‚Œã‚‹ãã‚‰ã„ã®æ°—æŒã¡ã§ã©ã‚“ã©ã‚“ç·¨é›†ã—ã¦è½ã¨ã—æ‰€ã‚’æ¢ãã†ã€‚

### 3. å°ã•ãæ®µéšçš„ã«å°å…¥ã™ã‚‹ãŸã‚ã«ã€å·®åˆ†ã®å‡ºã‚‹ãƒ«ãƒ¼ãƒ«ã‚’offã«ã™ã‚‹

æ®µéšçš„ã«å°å…¥ã™ã‚‹ãŸã‚ã€ã¾ãšã»åŸºæœ¬ãƒ«ãƒ¼ãƒ«ã¯å…¨ã¦ off ã§å°å…¥ã™ã‚‹ã€‚
ESLintã¨å®Œå…¨ã«åŒã˜éƒ¨åˆ†ã¯ãã®ã¾ã¾ ON ã§ recommended ã‚’å—ã‘å…¥ã‚Œã‚‹ã€‚

```json
{
  "$schema": "./node_modules/@biomejs/biome/configuration_schema.json",
  "vcs": {
    "enabled": false,
    "clientKind": "git",
    "useIgnoreFile": true // ãŠãã‚‰ã root ã® .gitignore ã—ã‹è¦‹ã‚Œã¦ã„ãªã„
  },
  "files": {
    "ignoreUnknown": false,
    // NOTE: "packages/**/*.[ts,tsx,js,jsx,json]" ã®æ§˜ãªæŒ‡å®šã¯ã§ããªã„ã‚‰ã—ã„ã€‚ã€‚ã€‚
    "include": [
      "packages/**/*.ts",
      "packages/**/*.tsx",
      "packages/**/*.js",
      "packages/**/*.jsx",
      "packages/**/*.json"
    ],
    "ignore": [
      "**/node_modules/**",
    ]
  },
  "formatter": {
    "enabled": false, // prettierã‚’å–ã‚Šé™¤ãã¾ã§ OFF
  },
  "organizeImports": {
    "enabled": false // å·®åˆ†ãŒå¤šã™ãã‚‹ã®ã§ä¸€æ—¦ OFF
  },
  "linter": {
    "enabled": true,
    "rules": {
      "recommended": true, // æ¨å¥¨ãƒ«ãƒ¼ãƒ«ã¯ ON ã«ã—ã¦ã„ããŸã„
      // çœç•¥ã™ã‚‹ãŒã€ä¸€æ—¦ recommended ã®å·®åˆ†ã®å¤šã„ãƒ«ãƒ¼ãƒ«ã¯ OFF ã«ã—ã¦å°å…¥ã ã‘æœãŸã™
      // æ®µéšçš„ã«1ãƒ«ãƒ¼ãƒ«ãšã¤PRã‚’ä½œæˆã—ã¦é©ç”¨ã™ã‚‹
      "style": {
        "useImportType": "error", // ã“ã‚Œã ã‘ ESLint ã¨ã»ã¼äº’æ›ãŒã‚ã£ãŸã®ã§ ON ã«ã—ã¦ã¿ãŸä¾‹
        "useNumberNamespace": "off",
      },
    }
  },
  "javascript": {
    "jsxRuntime": "reactClassic" // Reactã®importã‚’ä¸€æ—¦è¨±ã™ v18ç§»è¡Œã§ã¯å¿…è¦ç„¡ã„ãŒå·®åˆ†ãŒå¤§ãã‹ã£ãŸ
  }
}

```

### 4. CIã§å‹•ãæ§˜ã«ã™ã‚‹

ESLintãŒå‹•ã„ã¦ã„ã‚‹CIã« Biome ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§OKãªã®ã§ã€ç‰¹ç­†ã™ã‚‹ã“ã¨ã¯ãªã‹ã£ãŸã€‚
GitHub Actions ã‚„ CircleCI ãªã©ã«ç”¨æ„ã—ã¦ã‚ã‚‹ script ã‚’å‹•ã‹ã›ã°è‰¯ã„

#### ä½™è«‡: workspaceãƒˆãƒƒãƒ—ã®scriptsã‚¤ãƒ¡ãƒ¼ã‚¸
workspaceã”ã¨ã«eslintã‚’å›ã—ã¦ã„ã‚Œã°ã€biome + ä¸¦åˆ—ã§eslintã‚’å›ã™ã®ãŒãŠã™ã™ã‚ã‹ã‚‚

```json:root/package.json
"scripts": {
  "lint": "yarn biome check && yarn eslint-parallel",
  "lint:ci": "yarn biome ci && yarn eslint-parallel",
  "eslint-parallel": "yarn workspaces foreach -Api --exclude $(basename $PWD) run lint",
}
```

ã¾ãŸã€biomeã¯ `lint`, `check`, `ci`, `format` ç­‰ãŒã‚ã‚‹ãŸã‚ã€ç”¨é€”ã«ã‚ˆã£ã¦ä½¿ã„åˆ†ã‘ã‚‹ã€‚
(`biome check`ã¯lint, format, import sortingã‚’å®Ÿè¡Œã™ã‚‹)
[Biome CLIå…¬å¼ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§](https://biomejs.dev/ja/reference/cli/)

#### ä½™è«‡: Localã§ã¯ã‚¨ãƒ©ãƒ¼0ãªã®ã«ã€CIã§ã ã‘ã‚¨ãƒ©ãƒ¼ãŒå¤§é‡ã«å‡ºã‚‹ï¼ï¼ï¼Ÿ

CIå®Ÿè¡Œæ™‚ã«ç”Ÿæˆã—ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ignoreã‚’å¿˜ã‚Œã¦ã„ãŸã ã‘ã ã£ãŸã€‚
Localã«ã¯ç„¡ã„ãƒ•ã‚¡ã‚¤ãƒ«ã ã£ãŸã®ã§ã€ã¦ã£ãã‚Š biome.json ãŒ CIä¸Šã§ã ã‘èª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„ã‹ã¨æ€ã£ã¦æ…Œã¦ã¦ã—ã¾ã£ãŸã€‚

### 5. pre-commitã§ESLintã¨Biomeã‚’ä½µç”¨ã™ã‚‹

ç¾çŠ¶: prettier & husky & lint-staged ã§pre-commitã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹
=> ESLint & Biome & prettier ã®ä½µç”¨ãŒå¿…è¦ã«ãªã‚‹ï¼Ÿ

#### [Lefthook](https://github.com/evilmartians/lefthook)ã‚’å°å…¥ã™ã‚‹

husky & lint-staged ã®åŠ¹æœã‚’1ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§å®Ÿç¾ã—ã¦ãã‚Œã‚‹ã€‚
[Biomeå…¬å¼](https://biomejs.dev/recipes/git-hooks/#lefthook)ã§ã‚‚ç´¹ä»‹ã•ã‚Œã¦ã„ã¦ã€è¨˜è¿°ãŒæ¥½ã ã£ãŸã®ã§ä¹—ã‚Šæ›ãˆæ¤œè¨

```yml:root/.lefthook.yml
pre-commit:
  commands:
    check:
      glob: "packages/**/*.{js,ts,jsx,tsx,json}"
      run: npx @biomejs/biome check --no-errors-on-unmatched --files-ignore-unknown=true --colors=off {staged_files}
```

ä»Šå›ã¯ biome åˆ†ã ã‘
yarn workspaceã§gitå·®åˆ†ã ã‘ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã¨ãã«ã€staged_filesã§ä¸Šæ‰‹ãèª¿æ•´ã™ã‚‹ã®ãŒé›£ã—ã‹ã£ãŸã®ã§å¾Œæ—¥æŒ‘æˆ¦ã™ã‚‹ã€‚


## ESLintã®å®Ÿè¡Œæ™‚é–“ã®é•·ã„ãƒ«ãƒ¼ãƒ«ã‚’å‰Šã‚‹

## äº’æ›æ€§ã®ã‚ã‚‹Biomeã®ãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨ã™ã‚‹

## ESLintã®ãƒ«ãƒ¼ãƒ«ã‚’æœ¬å½“ã«å¿…è¦ãªã‚‚ã®ã ã‘ã«æ¸›ã‚‰ã™
